const{Fieldtype:V,IndexFieldtype:de,FieldtypeMixin:ce,HasActionsMixin:pe,HasInputOptionsMixin:ue,HasPreferencesMixin:he,IndexFieldtypeMixin:me,InlineEditForm:ge,DateFormatter:fe,ItemActions:be,RelatedItem:ke,RestoreRevision:xe,RevisionHistory:ve,RevisionPreview:ye,SaveButtonOptions:_e,SortableList:Ce,requireElevatedSession:Se,requireElevatedSessionIf:Ve,clone:we,deepClone:Re,resetValuesFromResponse:Te}=__STATAMIC__.core,{Alert:w,AuthCard:Pe,Avatar:Ie,Badge:Ae,Button:R,ButtonGroup:Fe,Calendar:Ee,Card:T,CardList:Me,CardListItem:De,CardPanel:Le,CharacterCounter:He,Checkbox:Be,CheckboxGroup:Ne,CodeEditor:Ue,Combobox:Oe,CommandPaletteItem:ze,ConfirmationModal:Ke,Context:Ge,ContextFooter:We,ContextHeader:Je,ContextItem:je,ContextLabel:qe,ContextMenu:Qe,ContextSeparator:Xe,CreateForm:Ye,DatePicker:Ze,DateRangePicker:$e,Description:et,DocsCallout:tt,DragHandle:rt,Dropdown:st,DropdownItem:nt,DropdownLabel:at,DropdownMenu:ot,DropdownSeparator:lt,DropdownFooter:it,DropdownHeader:dt,Editable:ct,ErrorMessage:pt,EmptyStateItem:ut,EmptyStateMenu:ht,Field:mt,Header:gt,Heading:ft,HoverCard:bt,Icon:P,Input:I,InputGroup:kt,InputGroupAppend:xt,InputGroupPrepend:vt,Label:yt,Listing:_t,ListingCustomizeColumns:Ct,ListingFilters:St,ListingHeaderCell:Vt,ListingPagination:wt,ListingPresets:Rt,ListingPresetTrigger:Tt,ListingRowActions:Pt,ListingSearch:It,ListingTable:At,ListingTableBody:Ft,ListingTableHead:Et,ListingToggleAll:Mt,LivePreview:Dt,LivePreviewPopout:Lt,Modal:Ht,ModalClose:Bt,ModalTitle:Nt,Pagination:Ut,Panel:Ot,PanelFooter:zt,PanelHeader:Kt,Popover:Gt,PublishComponents:Wt,PublishContainer:Jt,publishContextKey:jt,injectPublishContext:qt,PublishField:Qt,PublishFields:Xt,PublishFieldsProvider:Yt,PublishForm:Zt,PublishLocalizations:$t,PublishSections:er,PublishTabs:tr,Radio:rr,RadioGroup:sr,Select:A,Separator:nr,Slider:ar,Skeleton:or,SplitterGroup:lr,SplitterPanel:ir,SplitterResizeHandle:dr,StatusIndicator:cr,Subheading:pr,Switch:ur,TabContent:hr,Stack:mr,StackClose:gr,StackHeader:fr,StackFooter:br,StackContent:kr,Table:xr,TableCell:vr,TableColumn:yr,TableColumns:_r,TableRow:Cr,TableRows:Sr,TabList:Vr,TabProvider:wr,Tabs:Rr,TabTrigger:Tr,Textarea:Pr,TimePicker:Ir,ToggleGroup:Ar,ToggleItem:Fr,Widget:Er,registerIconSet:Mr,registerIconSetFromStrings:Dr}=__STATAMIC__.ui,F=window.Vue,{BaseTransition:Lr,BaseTransitionPropsValidators:Hr,Comment:Br,DeprecationTypes:Nr,EffectScope:Ur,ErrorCodes:Or,ErrorTypeStrings:zr,Fragment:E,KeepAlive:Kr,ReactiveEffect:Gr,Static:Wr,Suspense:Jr,Teleport:jr,Text:qr,TrackOpTypes:Qr,Transition:Xr,TransitionGroup:Yr,TriggerOpTypes:Zr,VueElement:$r,__esModule:es,assertNumber:ts,callWithAsyncErrorHandling:rs,callWithErrorHandling:ss,camelize:ns,capitalize:as,cloneVNode:os,compatUtils:ls,compile:is,computed:ds,createApp:cs,createBlock:k,createCommentVNode:h,createElementBlock:p,createElementVNode:n,createHydrationRenderer:ps,createPropsRestProxy:us,createRenderer:hs,createSSRApp:ms,createSlots:gs,createStaticVNode:fs,createTextVNode:y,createVNode:l,customRef:bs,defineAsyncComponent:ks,defineComponent:xs,defineCustomElement:vs,defineEmits:ys,defineExpose:_s,defineModel:Cs,defineOptions:Ss,defineProps:Vs,defineSSRCustomElement:ws,defineSlots:Rs,devtools:Ts,effect:Ps,effectScope:Is,getCurrentInstance:As,getCurrentScope:Fs,getCurrentWatcher:Es,getTransitionRawChildren:Ms,guardReactiveProps:Ds,h:Ls,handleError:Hs,hasInjectionContext:Bs,hydrate:Ns,hydrateOnIdle:Us,hydrateOnInteraction:Os,hydrateOnMediaQuery:zs,hydrateOnVisible:Ks,initCustomFormatter:Gs,initDirectivesForSSR:Ws,inject:Js,isMemoSame:js,isProxy:qs,isReactive:Qs,isReadonly:Xs,isRef:Ys,isRuntimeOnly:Zs,isShallow:$s,isVNode:en,markRaw:tn,mergeDefaults:rn,mergeModels:sn,mergeProps:nn,nextTick:an,nodeOps:on,normalizeClass:M,normalizeProps:ln,normalizeStyle:dn,onActivated:cn,onBeforeMount:pn,onBeforeUnmount:un,onBeforeUpdate:hn,onDeactivated:mn,onErrorCaptured:gn,onMounted:fn,onRenderTracked:bn,onRenderTriggered:kn,onScopeDispose:xn,onServerPrefetch:vn,onUnmounted:yn,onUpdated:_n,onWatcherCleanup:Cn,openBlock:d,patchProp:Sn,popScopeId:Vn,provide:wn,proxyRefs:Rn,pushScopeId:Tn,queuePostFlushCb:Pn,reactive:In,readonly:An,ref:Fn,registerRuntimeCompiler:En,render:Mn,renderList:D,renderSlot:Dn,resolveComponent:m,resolveDirective:Ln,resolveDynamicComponent:Hn,resolveFilter:Bn,resolveTransitionHooks:Nn,setBlockTracking:Un,setDevtoolsHook:On,setTransitionHooks:zn,shallowReactive:Kn,shallowReadonly:Gn,shallowRef:Wn,ssrContextKey:Jn,ssrUtils:jn,stop:qn,toDisplayString:a,toHandlerKey:Qn,toHandlers:Xn,toRaw:Yn,toRef:Zn,toRefs:$n,toValue:ea,transformVNodeArgs:ta,triggerRef:ra,unref:sa,useAttrs:na,useCssModule:aa,useCssVars:oa,useHost:la,useId:ia,useModel:da,useSSRContext:ca,useShadowRoot:pa,useSlots:ua,useTemplateRef:ha,useTransitionState:ma,vModelCheckbox:ga,vModelDynamic:fa,vModelRadio:ba,vModelSelect:ka,vModelText:xa,vShow:va,version:ya,warn:_a,watch:Ca,watchEffect:Sa,watchPostEffect:Va,watchSyncEffect:wa,withAsyncContext:Ra,withCtx:_,withDefaults:Ta,withDirectives:Pa,withKeys:L,withMemo:Ia,withModifiers:Aa,withScopeId:Fa}=F,H=(t,e)=>{const s=t.__vccOpts||t;for(const[x,c]of e)s[x]=c;return s},B={mixins:[V],components:{Alert:w,Button:R,Card:T,Icon:P,Input:I,Select:A},data(){return{verses:[],referenceInput:"",refreshing:!1,initializing:!0}},computed:{allBooks(){return this.meta.books||[]},maxVersesReached(){const t=this.meta.maxVerses;return t>0&&this.verses.length>=t}},watch:{verses:{deep:!0,handler(t){if(this.initializing)return;const e=t.filter(s=>s.text&&s.text.trim()!=="");this.$emit("update:value",e)}}},mounted(){this.value&&Array.isArray(this.value)&&(this.verses=this.value.map(t=>({...t,fetching:!1,error:null}))),this.$nextTick(()=>{this.initializing=!1})},methods:{addVerse(){this.maxVersesReached||this.verses.push({book:"",chapter:null,end_chapter:null,start_verse:null,end_verse:null,version:this.meta.defaultVersion||"NKJV",text:"",reference:"",fetched_at:null,api_source:null,fetching:!1,error:null})},removeVerse(t){this.verses.splice(t,1)},canFetch(t){return t.book&&t.chapter>0&&t.version},async fetchVerse(t){const e=this.verses[t];if(this.canFetch(e)){e.fetching=!0,e.error=null;try{const s=await this.$axios.post("/cp/bible-verses/fetch",{book:e.book,chapter:e.chapter,end_chapter:e.end_chapter||null,start_verse:e.start_verse||null,end_verse:e.end_verse||null,version:e.version});s.data.success?(Object.assign(e,s.data.verse),e.error=null):e.error=s.data.error||"Failed to fetch verse"}catch(s){s.response&&s.response.data&&s.response.data.error?e.error=s.response.data.error:e.error="Network error: "+s.message}finally{e.fetching=!1}}},async refreshAllVerses(){this.refreshing=!0;for(let t=0;t<this.verses.length;t++)this.canFetch(this.verses[t])&&await this.fetchVerse(t);this.refreshing=!1},async parseAndAddReference(){if(this.referenceInput.trim())try{const t=await this.$axios.post("/cp/bible-verses/parse",{reference:this.referenceInput});if(t.data.success){const e=t.data.parsed;this.verses.push({book:e.book,chapter:e.chapter,end_chapter:e.end_chapter||null,start_verse:e.start_verse||null,end_verse:e.end_verse||null,version:e.version,text:"",reference:"",fetched_at:null,api_source:null,fetching:!1,error:null}),await this.fetchVerse(this.verses.length-1),this.referenceInput=""}else alert(t.data.error||"Failed to parse reference")}catch(t){t.response&&t.response.data&&t.response.data.error?alert(t.response.data.error):alert("Error parsing reference: "+t.message)}},toNumber(t){if(t===""||t===null||t===void 0)return null;const e=parseInt(t,10);return isNaN(e)?null:e},updateBook(t,e){const s=this.verses[t];s.book=e,s.chapter=null,s.end_chapter=null,s.start_verse=null,s.end_verse=null,s.text="",s.error=null},updateChapter(t,e){const s=this.verses[t];s.chapter=this.toNumber(e),s.end_chapter=null,s.start_verse=null,s.end_verse=null,s.text="",s.error=null},updateEndChapter(t,e){const s=this.verses[t];s.end_chapter=this.toNumber(e),s.end_chapter&&(s.start_verse=null,s.end_verse=null),s.text="",s.error=null},updateStartVerse(t,e){const s=this.verses[t];s.start_verse=this.toNumber(e)},updateEndVerse(t,e){const s=this.verses[t];s.end_verse=this.toNumber(e)},formatDate(t){return t?new Date(t).toLocaleString():""}}},N={class:"bible-verse-finder"},U={key:0,class:"mb-6"},O={class:"flex gap-2"},z={class:"space-y-4 mb-6"},K={class:"flex items-center justify-between mb-4 pb-3 border-b border-gray-200 dark:border-dark-400"},G={class:"text-base font-bold text-gray-700 dark:text-gray-100"},W={class:"space-y-4"},J={class:"grid grid-cols-2 md:grid-cols-5 gap-4"},j={key:0,class:"text-xs text-gray-500 dark:text-dark-175"},q={key:0},Q={key:1},X={key:2},Y={key:3},Z={class:"flex gap-2"},$={key:2,class:"mt-4 p-4 bg-gradient-to-br from-green-50 via-emerald-50 to-blue-50 dark:from-green-900/30 dark:via-emerald-900/30 dark:to-blue-900/30 border-2 border-green-400 dark:border-green-500 rounded-lg"},ee={class:"flex items-center gap-2 mb-3 pb-3 border-b-2 border-green-300 dark:border-green-500"},te={class:"font-semibold text-gray-900 dark:text-gray-100"},re={class:"text-sm text-gray-600 dark:text-gray-300"},se={class:"text-gray-900 dark:text-gray-100 leading-relaxed mb-3 text-base font-serif italic px-3 py-2 bg-white/50 dark:bg-gray-800/50 rounded"},ne={class:"text-xs text-gray-600 dark:text-gray-400 flex items-center gap-1.5"},ae={key:0,class:"text-center py-8 text-gray-500 dark:text-dark-175 border-2 border-dashed border-gray-300 dark:border-dark-400 rounded"},oe={class:"flex gap-2"};function le(t,e,s,x,c,o){const g=m("Input"),f=m("Button"),v=m("Select"),C=m("Alert"),b=m("Icon"),S=m("Card");return d(),p("div",N,[t.meta.enableReferenceParsing?(d(),p("div",U,[e[1]||(e[1]=n("label",{class:"text-xs uppercase tracking-wide text-gray-500 dark:text-dark-175 mb-2 block"}," Quick Add: Paste Reference ",-1)),n("div",O,[l(g,{modelValue:c.referenceInput,"onUpdate:modelValue":e[0]||(e[0]=r=>c.referenceInput=r),onKeypress:L(o.parseAndAddReference,["enter"]),placeholder:"e.g., Psalm 46, John 3:16-17 NKJV",class:"flex-1"},null,8,["modelValue","onKeypress"]),l(f,{onClick:o.parseAndAddReference,variant:"primary",disabled:!c.referenceInput.trim(),text:"Parse & Add"},null,8,["onClick","disabled"])]),e[2]||(e[2]=n("div",{class:"text-xs text-gray-500 dark:text-dark-175 mt-1"},' Examples: "Psalm 46", "Psalm 46-47", "John 3:16", "John 3:16-17 NKJV" ',-1))])):h("",!0),n("div",z,[(d(!0),p(E,null,D(c.verses,(r,u)=>(d(),k(S,{key:u,class:M(["p-4",{"opacity-60":r.fetching}])},{default:_(()=>[n("div",K,[n("h4",G,"Scripture "+a(u+1),1),l(f,{onClick:i=>o.removeVerse(u),variant:"ghost",icon:"trash",size:"sm",title:"Remove verse"},null,8,["onClick"])]),n("div",W,[n("div",null,[e[3]||(e[3]=n("label",{class:"text-xs uppercase tracking-wide text-gray-500 dark:text-dark-175 mb-1 block"},"Book",-1)),l(v,{"model-value":r.book,"onUpdate:modelValue":i=>o.updateBook(u,i),options:o.allBooks,disabled:r.fetching,placeholder:"Select Book..."},null,8,["model-value","onUpdate:modelValue","options","disabled"])]),n("div",J,[n("div",null,[e[4]||(e[4]=n("label",{class:"text-xs uppercase tracking-wide text-gray-500 dark:text-dark-175 mb-1 block"},"Chapter",-1)),l(g,{type:"number","model-value":r.chapter,"onUpdate:modelValue":i=>o.updateChapter(u,i),min:"1",disabled:!r.book||r.fetching},null,8,["model-value","onUpdate:modelValue","disabled"])]),n("div",null,[e[5]||(e[5]=n("label",{class:"text-xs uppercase tracking-wide text-gray-500 dark:text-dark-175 mb-1 block"},"End Chapter",-1)),l(g,{type:"number","model-value":r.end_chapter,"onUpdate:modelValue":i=>o.updateEndChapter(u,i),min:"1",disabled:!r.chapter||r.fetching,placeholder:"Optional"},null,8,["model-value","onUpdate:modelValue","disabled"])]),n("div",null,[e[6]||(e[6]=n("label",{class:"text-xs uppercase tracking-wide text-gray-500 dark:text-dark-175 mb-1 block"},"Start Verse",-1)),l(g,{type:"number","model-value":r.start_verse,"onUpdate:modelValue":i=>o.updateStartVerse(u,i),min:"1",disabled:!r.chapter||r.fetching||r.end_chapter,placeholder:"Optional"},null,8,["model-value","onUpdate:modelValue","disabled"])]),n("div",null,[e[7]||(e[7]=n("label",{class:"text-xs uppercase tracking-wide text-gray-500 dark:text-dark-175 mb-1 block"},"End Verse",-1)),l(g,{type:"number","model-value":r.end_verse,"onUpdate:modelValue":i=>o.updateEndVerse(u,i),min:"1",disabled:!r.chapter||r.fetching||r.end_chapter,placeholder:"Optional"},null,8,["model-value","onUpdate:modelValue","disabled"])]),n("div",null,[e[8]||(e[8]=n("label",{class:"text-xs uppercase tracking-wide text-gray-500 dark:text-dark-175 mb-1 block"},"Version",-1)),l(v,{"model-value":r.version,"onUpdate:modelValue":i=>r.version=i,options:t.meta.versions,disabled:r.fetching},null,8,["model-value","onUpdate:modelValue","options","disabled"])])]),r.chapter?(d(),p("div",j,[r.end_chapter?(d(),p("span",q,"Chapter range: Will fetch all verses from "+a(r.book)+" "+a(r.chapter)+" through "+a(r.end_chapter),1)):r.start_verse?r.end_verse?(d(),p("span",X,"Verse range: "+a(r.book)+" "+a(r.chapter)+":"+a(r.start_verse)+"-"+a(r.end_verse),1)):(d(),p("span",Y,"Single verse: "+a(r.book)+" "+a(r.chapter)+":"+a(r.start_verse),1)):(d(),p("span",Q,"Whole chapter: Will fetch all verses from "+a(r.book)+" "+a(r.chapter),1))])):h("",!0),n("div",Z,[l(f,{onClick:i=>o.fetchVerse(u),variant:"primary",disabled:!o.canFetch(r)||r.fetching,loading:r.fetching,icon:"sync",text:r.fetching?"Fetching...":"Fetch Verse"},null,8,["onClick","disabled","loading","text"])]),r.error?(d(),k(C,{key:1,variant:"danger"},{default:_(()=>[y(a(r.error),1)]),_:2},1024)):h("",!0),r.text&&!r.error?(d(),p("div",$,[n("div",ee,[l(b,{name:"checkmark",class:"size-5 text-green-600 dark:text-green-400"}),n("span",te,a(r.reference),1),n("span",re,"("+a(r.version)+")",1)]),n("div",se,a(r.text),1),n("div",ne,[l(b,{name:"time-clock",class:"size-3 text-gray-400 dark:text-gray-500"}),y(" Fetched: "+a(o.formatDate(r.fetched_at)),1)])])):h("",!0)])]),_:2},1032,["class"]))),128)),c.verses.length===0?(d(),p("div",ae,[l(b,{name:"content-book-open",class:"size-12 mx-auto mb-2 text-gray-400 dark:text-dark-300"}),e[9]||(e[9]=n("p",null,"No verses added yet",-1)),e[10]||(e[10]=n("p",{class:"text-sm"},'Click "Add Verse" below to get started',-1))])):h("",!0)]),n("div",oe,[l(f,{onClick:o.addVerse,disabled:o.maxVersesReached,icon:"plus",text:"Add Verse"},null,8,["onClick","disabled"]),c.verses.length>0?(d(),k(f,{key:0,onClick:o.refreshAllVerses,disabled:c.refreshing,loading:c.refreshing,icon:"sync",text:c.refreshing?"Refreshing...":"Refresh All"},null,8,["onClick","disabled","loading","text"])):h("",!0)])])}const ie=H(B,[["render",le]]);Statamic.$components.register("bible_verse_finder-fieldtype",ie);
